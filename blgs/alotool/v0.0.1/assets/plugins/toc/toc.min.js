class TOC{constructor({from:t,to:e}){t&&"string"==typeof t&&(t=cm.$q(t)),e&&"string"==typeof e&&(e=cm.$q(e)),this.fromEl=t,this.toEl=e,this.fromEl&&this.toEl&&(this.toEl.adClz("d-none"),this.hEls=this.fromEl.querySelectorAll("h1, h2, h3, h4, h5, h6"),this.tocEl=cm.$create("div"))}static generateId(t){return""+t.offsetLeft+t.offsetTop}static getHLevel(t){switch(t.tagName.toLowerCase()){case"h1":return 1;case"h2":return 2;case"h3":return 3;case"h4":return 4;case"h5":return 5;case"h6":return 6;default:return 1}}getTopHLevel(){let e=6;for(let t=0;t<this.hEls.length;t++){var a=TOC.getHLevel(this.hEls[t]);e=a<e?a:e}return e}generate(){if(this.fromEl&&this.toEl){let o=this.getTopHLevel()-1,s=this.tocEl;for(let a=0;a<this.hEls.length;a++){let t=this.hEls[a];var l=TOC.getHLevel(t),i=l-o;let e=cm.$create("a");if(e.adClz("btn-link"),t.id||(t.id=TOC.generateId(t)),e.href="#"+t.id,e.textContent=t.textContent,0<i){for(let t=0;t<i;t++){let t=cm.$create("ol");var c=cm.$create("li");t.appendChild(c),s.appendChild(t),s=c}s.appendChild(e)}else{for(let t=0;t<-i;t++)s=s.parentNode.parentNode;let t=cm.$create("li");t.appendChild(e),s.parentNode.appendChild(t),s=t}o=l}this.tocEl&&this.tocEl.hasChildNodes()&&(this.toEl.rmClz("d-none"),this.toEl.appendChild(this.tocEl.firstChild))}}}const tc={init:function(t){t={...t&&"object"==typeof t?t:{}};const e=cm.$id("hc");e.appendChild(cm.str2HTML("<div><div class='i-bar'><a role='button' class='i-toc' data-bs-toggle='offcanvas' data-bs-target='#ocvToc' aria-controls='ocvToc'><i class='bi bi-list-ol'></i></a></div><div class='offcanvas offcanvas-start ocvToc' data-bs-scroll='true' data-bs-backdrop='false' tabindex='-1' id='ocvToc' aria-labelledby='ocvTocLabel'><div class='offcanvas-header border-top border-bottom pb-2'><h5 class='offcanvas-title' id='ocvTocLabel'><i class='bi bi-list-ol me-2'></i>Table Of Contents</h5><button type='button' class='btn-close text-reset' data-bs-dismiss='offcanvas' aria-label='Close'/></div><div class='offcanvas-body'><div class='toc'/></div></div></div>").firstElementChild),cm.waitUntilElExists(".toc").then(t=>{const e=cm.$id("ocvToc"),s=cm.$q(".post-body"),l=cm.$q(".toc");let i=!1;e.addEventListener("shown.bs.offcanvas",t=>{if(s&&l&&!i){const a=e.$q(".offcanvas-body");cm.lzdShow(a,{spiBgOverlay:"rgba(0,0,0,0.05)"}),cm.loadJSPr({id:"tocjs",url:"fake.js",loadType:"async"}).then(t=>{i=!0,new TOC({from:s,to:l}).generate(),cm.lzdHide(a);const e=s.querySelectorAll("h1, h2, h3, h4, h5, h6"),o=l.querySelectorAll("a");e&&o&&(window.onscroll=()=>{let a="";e.forEach(t=>{var e=t.offsetTop;pageYOffset>=e-60&&(a=t.getAttribute("id"))}),o.forEach(t=>{t.classList.remove("active"),t.getAttribute("href")==="#"+a&&t.classList.add("active")})})},t=>{cm.lzdHide(a)})}});const a=cm.$q("ul[aria-labelledby='postInfoMActions']");a&&!a.$q("li a[data-bs-target='#ocvToc']")&&a.appendChild(cm.str2HTML("<li><a class='dropdown-item' role='button' data-bs-toggle='offcanvas' data-bs-target='#ocvToc' aria-controls='ocvToc'><i class='bi bi-list-ol me-3'></i>Table Of Contents</a></li>").firstElementChild)},t=>{})}};